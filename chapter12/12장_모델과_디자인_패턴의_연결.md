# 12장 모델과 디자인 패턴의 연결



## 디자인 패턴과 도메인 패턴

- 어떤 사람에게는 패턴인 것이 다른 사람에게는 기본적인 요소일 수 있다.
- 디자인 패턴은 특정한 상황에서 일반적인 설계 문제를 해결하고자 상호 교류하는 수정 가능한 객체와 클래스에 관해 설명한다.
- 디자인 패턴에 소개된 패턴을 도메인 모델링에 적용하기 위해서는 도메인 패턴에 맞게 적절하게 수정해야 한다.
- 적용하려는 디자인 패턴의 아이디어가 도메인 개념에 적합한지 **기술**이 아닌 **의미**에 집중하여 고려해야한다.
- 디자인 패턴의 적용은 기술적인 클래스 다이어그램 이해보다는 의도를 이해하는 것이 중요하다.



## Strategy(Policy) (전략, 정책) 패턴

- 프로세스의 규칙과 프로세스를 제어하는 행위를 서로 분리
  - 프로세스의 중심개념과 변경되는 부분을 분리한다.
  - 중심 프로세스와 부가적인 선택 사항을 더욱 명확하게 식별할 수 있게 된다. 
- 프로세스에서 변화하는 부분을 전략(strategy) 객체로 분리해서 모델에 표현
- 다양한 방식으로 변형된 전략 객체는 프로세스의 서로 다른 처리 방식을 표현

[참고] https://western-sky.tistory.com/41

**전략 패턴과 템플릿 콜백 패턴 차이**
```
[전략패턴]
- 런타임시 객체가 생성될 때 전략이 정해짐
- 템플릿 콜백 패턴에 비해 context와 전략간 의존성이 더 강하단 단점 (인스턴스 참조 > 메서드 파라미터 참조)

[템플릿 콜백 패턴]
- context가 해당 전략을 실행할 시점에 전략이 정해짐
- 자주 사용되는 context라면 템플릿 콜백 패턴은 재사용성이 떨어진다는 단점 존재(매번 callback을 정의해주어야하므로)
```


## Composite (복합체) 패턴

```
- 복잡한 도메인을 모델링하는 동안 중요한 객체가 여러 개의 작은 부분으로 조합되어 구성되는 경우가 있다.
- 중첩돼 있는 복합 객체 간의 관련성을 모델에 반영하지 않을 경우 계층 구조상의 각 수준에 공통적인 행위를 중복시킬 수 밖에 없다
- 계층 구조상의 각 수준에서 다루는 개념에 차이가 없더라도 클라이언트는 서로 다른 수준을 처리하기 위해 각기 다른 인터페이스를 사용해야 한다.

```

- Composite 내부에 포함된 모든 구성요소를 포괄하는 추상 타입을 정의하라
- 포함된 항목의 집계 정보를 반환할 수 있는 메서드를 컨테이너에 구현하라
- 계층 구조상의 모든 수준에서 동일한 행위를 제공하므로 크고 작은 각 부분이 전체 구조를 투명하게 반영하는가, 라는 의미 있는 질문을 던질 수 있다
[예제코드](code/Computer.java)  




## 도메인 모델에 적용할 수 없는 디자인 패턴의 예 : Flyweight 패턴

- 도메인 모델과는 전혀 관련 없는 디자인 패턴
- 제한된 수의 VO 집합이 자주 사용될 경우 VO를 Flyweight로 구현하는 것이 적절
- VO에는 적용할 수 있는 구현 선택사항이지만 Entity에는 적용할 수 없다.

[참고] https://velog.io/@hoit_98/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-Flyweight-%ED%8C%A8%ED%84%B4

