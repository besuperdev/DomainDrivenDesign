# 15장 디스틸레이션
디스틸레이션은 혼합된 요소를 분리해서 본질을 좀더 값지고 유용한 형태로 뽑아내는 과정이다. 모델은 지식의 정수를 추출한 것이다
<img width="515" alt="map" src="https://user-images.githubusercontent.com/599971/195317708-05444391-88c6-4a4e-899e-ec4a420539a2.png">

## 핵심 도메인(Core Domain)
이해하기 힘든 시스템은 변경하기도 어렵다. 아울러 변경의 효과도 예측하기 어렵다.
Core Domain은 시스템에서 가장 큰 가치가 더해지는 곳이다.
- 모델을 요약하라
- Core Domain에 가장 재능 있는 인력을 할당하고 그에 따라 인력을 채용하라.
### Core 선택
어떤 Core Domain를 선택하느냐는 본인의 관점에 달렸다.
- 통화 매매 보조 애플리케이션
- 해운 애플리케이션
### 누가 그 일을 할 것인가?
외부 설계 전문가를 고용하는 것은 대개 도움이 되지 않는다. 
- 그 이유는 팀에서 도메인 지식을 축적할 필요가 있기 때문이다.
Core Domain을 구집하는 것도 있음직한 일은 아니다
- 프레임웤이 Core Domain을 제약할 수 있기 때문
### 디스틸레이션의 단계적 확대
- 도메인 비전 선언문(Domain Vision Statement)
- 강조된 핵심(Highlighted core)
- 일반 하위 도메인(Generic Subdomain)
- 응집력 있는 메커니즘(Cohesive Mechanism)
- 분리된 핵심(Segregated Core)
- 추상화된 핵심(Abstract Core)

## 일반 하위 도메인(Generic Subdomain)
모델의 일부는 전문 지식을 포착하거나 전달하지 않고 복잡성을 더하곤 한다. 부수적인 요소는 Core Domain을 식별하고 이해하는 일을 더욱 어렵게 만든다.
하위 도메인이 분리되고 나면 해당 하위 도메인의 계속되는 개발에 대해서는 Core Domain보다 낮은 우선순위를 부여하고 그 일에 핵심 개발자를 배치하지 않는다.
개발시 추가적인 선택사항:
- 기성 솔루션
- 공표된 설계나 모델
- 외주제작된 구현
- 사내 구현
### 프로젝트 위험 관리
Generic Subdomain을 다루는 보조 시스템을 구축하고 싶어지는데 주의해야 한다

## 도메인 비전 선언문(Domain Vision Statement)
약 한 페이지 분량의 Core domain을 짧게 기술하고 그것이 가져올 가치에 해당하는 **가치 제안**을 작성하라
- 소셜을 예시로 들어보자...
  - 이것은 도메인 비전 선언문의 일부다: 유저들은 특정 종목에 대한 글 또는 댓글, 대댓글을 작성하여 자신의 의견을 표출할 수 있다. ...
  - 이것은 중요하긴 하지만 도메인 비전 선언문의 일부는 아니다: ?
팀 내에서 방향성을 공유하게 만들어준다.

**비전 선언문 예시:**
[https://www.ceaseo.com/ko/vision-statement-examples.html](https://www.ceaseo.com/ko/vision-statement-examples.html)
- 이미 회사들이 사용중인 개념이었다!
- 프로젝트에도 비전 선언문은 필요하다..!

## 강조된 핵심(Highlighted Core)
도메인 비전 선언문에서는 대체로 Core Domain을 파악하지만 특정 Core 모델의 구성요소를 식별하는 것은 전혀 예측할 수 없는 개별 해석의 몫으로 남는다.
- 도메인 비전 선언문은 해석의 여지가 있다. Core Domain을 알게 하려면 어떤 기법이든 괜찮다
- Q) 팀의 의사소통 수준을 어떻게 측정할 수 있을까?

### 디스틸레이션 문서
디스틸레이션 문서는 완전한 설계 문서가 아니다.
Core Domain과 Core의 구성요소 사이에서 일어나는 상호작용을 기술하는 매우 간결한 문서를 작성하라. ... 위험요소를 제한하는 가장 좋은 방법은 절대적으로 최소주의를 지향하는 것이다.

### 표시된 Core
...Core Domain을 조망하는 전체적인 그림이 필요하고 모든 이들의 노력이 그곳에 집중돼야 한다는 사실을 알고 있었다.
모델의 주요 저장소 안에 있는 Core Domain의 구성요소에 대해 그것의 여ㅕㄱ할을 설명하려 하지 말고 표시하라. 개발자가 힘들이지 않고도 Core의 안과 밖을 알 수 있게 하라.
변경이 일어나면 모든 팀원에게 이 사실을 즉시 알리고 새로운 버전의 문서를 배포해야 한다.
- 문서도 프로그램 라이프 사이클에 맞춰 유지보수되는 걸까? 이 변화를 문서화 하는 행동은 어떻게 유지될 수 있을까?

## 응집력 있는 메커니즘(Cohesive Mechanism)
문제 해결을 위한 알고리즘을 제공하는 수많은 메서드가 문제를 표현하는 메서드를 불분명하게 만드는 것이다.
개념적으로 Cohesive Mechanism을 별도의 경량 프레임워크로 분할하라
이제 도메인의 다른 요소들은 해법의 복잡성("어떻게")을 프레임워크에 위임해서 문제("무엇")를 표현하는데 집중할 수 있다.

---
Generic Subdomain vs Cohesive Mechanism
공통점: 둘 다 Core domain의 부담을 더는 데 목적이 있다.
차이점: 맡고 있는 책임의 본질. Generic Subdomain는 덜 중요하고 덜 특화된 Core Domain. Cohesive Mechanism는 도메인을 나타내지 않는다.
